{% extends "overall_layout.html" %}

{% block styling_block %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='map.css') }}">
{% endblock %}

{% block overall_layout_body %}
<div id="main-page-content">

  <div id="characters">
    <div id="character-header">
      <div class="small-horizontal-scroll">
      Your Party
      </div>
    </div>
    <div class="vertically-enscrolled">
      <div id="total-character-level">Total: 14</div>
      <div id="character-displays">
        {% for character_class in ['fighter','wizard','cleric','linguist','chemist','economist'] if character_class in visible_puzzle_ids %}
          <a href="{{ url_for('round', round_id = character_class) }}">
            <div id="character-{{ character_class }}" class="individual-character">
              <div class="individual-character-class">The {{ character_class|capitalize }}</div>
              <img src="{{ url_for('static', filename='PNG-export/characters/%s-ring.png' % character_class) }}"/>
              <div class="individual-character-status-container">
                <img src="{{ url_for('static', filename='PNG-export/characters/%s-logo.png' % character_class) }}"/>
                <span class="individual-character-level">{{ team_properties.teamProperties.CharacterLevelsProperty.levels[character_class.upper()]|default(0) }}</span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>

      <div id="inventory-gold-display">
          <div class="individual-inventory-gold">
            <a href="{{ url_for('inventory') }}">
              <img src="{{ url_for('static', filename='PNG-export/icons/chest.png') }}" style="width:50px;height:50px;vertical-align:middle;"/>
              {% if puzzle_visibilities.get('merchants',{}).get('status','') == 'SOLVED' %}
                6/6
              {% else %}
                {{ team_properties.get('teamProperties',{}).get('InventoryProperty',{}).get('inventoryItems',[])|length if team_properties else 'NA' }}/40
              {% endif %}
            </a>
          </div>
          <div class="individual-inventory-gold">
            <img src="{{ url_for('static', filename='PNG-export/icons/coin.png') }}" style="width:50px;height:50px;vertical-align:middle;"/>&nbsp;{{ team_properties.get('teamProperties',{}).get('GoldProperty',{}).get('gold',0) if team_properties else 'NA'}}
          </div>
      </div>
    </div>
  </div>
    
  <div id="world-map-container">
    <div id="world-map-header" class="small-horizontal-scroll">
      <div class="horizontal-enscrolled-left"></div><div class="horizontal-enscrolled-middle">
        <div class="horizontal-enscrolled-text">World Map</div>
      </div><div class="horizontal-enscrolled-right"></div>
    </div>
    <div id="world-map">
<!--      <div id="fog-overlay" style="content: url({{ url_for('static', filename='PNG-export/map/fog-no-transparency.png') }});"></div>-->
      <div id="world-map-background" style="content: url({{ url_for('static', filename='PNG-export/map/map.png') }});"></div>
        {% for quest in [('dynast',0,0,'The Despondent Dynast'),('dungeon',90,120,'The Dismal Dungeon'),('thespians',25,385,'The Thrilling Thespians'),('bridge',205,290,'The Broken Bridge'),('criminal',225,110,'The Crafty Criminal'),('minstrels',340,0,'The Modest Minstrels'),('cube',440,110,'The Curious Cube'),('warlord',340,240,'The Woeful Warlord')] if quest[0] in visible_puzzle_ids %}
          <a href="{{ url_for('round', round_id = quest[0]) }}">
            <div id="quest-map-{{ quest[0] }}" class="individual-quest caption-control" style="width:108px; height:81px; position:absolute; top:{{ quest[1] }}px; left:{{ quest[2] }}px; z-index:200;">
              <img src="{{ url_for('static', filename='PNG-export/quests/%s-scene.png' % quest[0]) }}"/>
              <div class="caption">{{ quest[3] }}</div>
            </div>
          </a>
        {% endfor %}
        {% for rescue in [('linguist',140,10),('chemist',30,290),('economist',150,450)] if 'rescue_the_' + rescue[0] in visible_puzzle_ids %}
          <a href="{{ url_for('puzzle', puzzle_id = 'rescue_the_' + rescue[0]) }}">
            <div id="rescue-map-{{ rescue[0] }}" class="individual-rescue caption-control" style="height: 81px; position:absolute; top:{{ rescue[1] }}px; left:{{ rescue[2] }}px; z-index:200;">
              <img src="{{ url_for('static', filename='PNG-export/characters/%s-full.png' % rescue[0]) }}"/>
              <div class="caption">Rescue the {{ rescue[0]|capitalize }}</div>
            </div>
          </a>
        {% endfor %}
        {% if 'merchants' in visible_puzzle_ids %}
          <a href="{{ url_for('puzzle', puzzle_id = 'merchants') }}">
            <div class="individual-quest caption-control" style="width:108px; height:81px; position:absolute; top:310px; left:390px; z-index:200;">
              <img src="{{ url_for('static', filename='PNG-export/quests/merchants-scene.png') }}"/>
              <div class="caption">The Maniacal Merchants</div>
            </div>
          </a>
        {% endif %}
        {% if True %}
          <a href="{{ url_for('puzzle', puzzle_id = 'fortress') }}">
            <div class="individual-quest caption-control" style="width:108px; height:81px<em></em>; position:absolute; top:450px; left:420px; z-index:200;">
              <img src="{{ url_for('static', filename='PNG-export/quests/fortress-scene.png') }}"/>
              <div class="caption">The Final Fortress</div>
            </div>
          </a>
        {% endif %}
    </div>
  </div>

  <div id="events">
    <div id="events-header" class="small-horizontal-scroll">
      <div class="horizontal-enscrolled-left"></div><div class="horizontal-enscrolled-middle">
        <div class="horizontal-enscrolled-text">Events</div>
      </div><div class="horizontal-enscrolled-right"></div>
    </div>
    <div class="vertically-enscrolled">
      <div class="event-entry">
        <div class="event-name">Event the First</div>
        <div class="event-time">Friday 6pm</div>
        <div class="event-description">XXXXXXX XXXXXX XXXXX XXXXXXXXX XXXXXX XXXXX</div>
      </div>
      <div class="event-entry">
        <div class="event-name">Event the Second</div>
        <div class="event-time">Friday 10pm</div>
      </div>
      <div class="event-entry">
        <div class="event-name">Event the Third</div>
        <div class="event-time">Saturday 10am</div>
      </div>
      <div class="event-entry">
        <div class="event-name">Event the Fourth</div>
        <div class="event-time">Saturday 2pm</div>
      </div>
    </div>
  </div>
    
</div>
{% endblock %}
