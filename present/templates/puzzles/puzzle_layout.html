{% extends "overall_layout.html" %}

{% macro generate_background(round_id) %}
  {% set character_colors = {'fighter': '#b49674', 'wizard': '#3079bd', 'cleric': '#853e3e',
          'linguist': '#594366', 'chemist': '#8ac664', 'economist':'#696969' } %}
  {% if round_id in ['fighter','wizard','cleric','linguist','chemist','economist'] %}
    <div id="character-round-background-container"></div>
    <div id="character-round-background-overlay-container" style="background-color: {{ character_colors.get(round_id) }};"></div>
  {% elif round_id in ['dynast','dungeon','thespians','bridge','criminal','minstrels','cube','warlord'] %}
    <div id="quest-round-background-container"></div>
  {% else %}
    <div id="quest-round-background-container"></div>
  {% endif %}
{% endmacro %}

{% macro generate_reward(round_id) %}
  {% if round_id in ['fighter','wizard','cleric','linguist','chemist','economist'] %}
    <div id="reward">
      <span>Reward: One Level of <img src="{{ url_for('static', filename='temp/art/Characters/%s-logo-color.png' % round_id) }}" style="width:30px;height:30px;vertical-align:middle;"/></span>
    </div>
  {% elif round_id in ['dynast','dungeon','thespians','bridge','criminal','minstrels','cube','warlord'] %}
    <div id="reward">
      <span>Reward: <img src="{{ url_for('static', filename='temp/art/chest.png') }}" style="width:30px;height:30px;vertical-align:middle;"/> Item or <img src="{{ url_for('static', filename='temp/art/gold.png') }}" style="width:30px;height:30px;vertical-align:middle;"/> Gold</span>
    </div>
  {% endif %}
{% endmacro %}

{% block styling_block %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='puzzle.css') }}">
    {% block puzzle_head_block %}{% endblock %}
{% endblock %}

{% block header_content %}
  <div id="submit"><a href="{{ submit_url_for(puzzle_id) }}">Check answer</a></div>
{% endblock %}

{% block overall_layout_body %}
  {{ generate_background(puzzle_round_id) }}
  <div id="puzzle-container">
    <div id="header">
      <span class="enscrolled-90px-before"></span><span class="enscrolled-90px"><span>{% block puzzle_name_block %}{% endblock %}</span></span><span class="enscrolled-90px-after"></span><br>
    </div>
    {% if puzzle_visibility and puzzle_visibility.status == 'SOLVED' %}
      <div id="answers">
        <img src="{{ url_for('static', filename='temp/art/Maps/complete-logo-color.png') }}" style="width:30px;height:30px;vertical-align:middle;"/>
        <span class="puzzle-solution-label">
          Solved:
        </span>
        <span class="puzzle-solution">
          {% for answer in puzzle_visibility.solvedAnswers %}
              {{ answer }}
          {% endfor %}
        </span>
      </div>
    {% else %}
      {{ generate_reward(puzzle_round_id) }}
    {% endif %}
    <div id="flavortext">
      {% block puzzle_flavortext_block %}{% endblock %}
    </div>
    <div id="puzzle-content">
      {% block puzzle_content_block %}{% endblock %}
    </div>
  </div>
{% endblock %}