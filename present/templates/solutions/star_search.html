{% extends "solutions/solution_layout.html" %}
{% set puzzle_round_id = 'dynast' %}
{% block title_block %}Star Search: Solution{% endblock %}
{% block puzzle_name_block %}Star Search: Solution{% endblock %}
{% block byline %}By Matt Gruskin and TK Focht{% endblock %}
{% block solution %}TONIGHT AT NOON{% endblock %}

{% block puzzle_head_block %}
  <style>
    table {
      border: 1px solid black;
      border-collapse: collapse;
      border-spacing: 0;
    }
    th, td {
      border: 1px solid black;
      padding: 4px;
    }
    .play-button {
      cursor: pointer;
    }
  </style>
  <script src="//www.midijs.net/lib/midi.js"></script>
  <script>
    function play(button, src) {
      if ($(button).hasClass("fa-stop-circle")) {
        $(button).removeClass("fa-stop-circle");
        $(button).addClass("fa-play-circle");
        MIDIjs.stop();
      } else {
        $(".play-button").removeClass("fa-stop-circle");
        $(".play-button").addClass("fa-play-circle");
        $(button).removeClass("fa-play-circle");
        $(button).addClass("fa-stop-circle");
        MIDIjs.play(src);
      }
    }
    var playbackDoneTimeout;
    MIDIjs.player_callback = function() {
      if (playbackDoneTimeout) {
        clearTimeout(playbackDoneTimeout);
      }
      playbackDoneTimeout = setTimeout(function() {
        $(".play-button").removeClass("fa-stop-circle");
        $(".play-button").addClass("fa-play-circle");
        playbackDoneTimeout = undefined;
      }, 1000);
    };
  </script>
{% endblock %}

{% block solution_content_block %}
  <div>
    <p>
      Each piano animation contains a note marked with a zodiac constellation
      symbol. The zodiac constellations make up thirteen of the eighty-eight
      modern International Astronomical Union constellations. There are also
      eighty-eight keys on a piano keyboard. If one orders the eighty-eight IAU
      constellations alphabetically, and assigns them to piano keys from left to
      right, then the zodiac constellations end up in their positions in the
      piano animations. So this establishes a one-to-one mapping between piano
      keys and constellations.
    </p>
    <p>
      Each piano animation is playing the melody of a song that has the word
      STAR somewhere in its lyrics. The solver should identify the piano key
      that the STAR lyric lands on, and determine that piano key&rsquo;s
      constellation. The solver should then index into the constellation name
      using the number of times the piano key marked with # was played in that
      animation.
    </p>
    <p>
      Finally, the solver should order the indexed letters by the order of the
      zodiac constellations to obtain the answer <b>TONIGHT AT NOON</b>.
    </p>
    <table>
      <tr>
        <th>Song</th>
        <th>STAR key</th>
        <th>Constellation</th>
        <th># plays</th>
        <th>Letter</th>
        <th>Zodiac</th>
        <th>Zodiac order</th>
      </tr>
      <tr>
        <td>
          A Whole New World
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/a_whole_new_world.mid') }}')"
          >
          </span>
        </td>
        <td>C6</td>
        <td>Phoenix</td>
        <td>5</td>
        <td>N</td>
        <td>Sagittarius</td>
        <td>10</td>
      </tr>
      <tr>
        <td>
          Can You Feel The Love Tonight
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/can_you_feel_the_love_tonight.mid') }}')"
          >
          </span>
        </td>
        <td>G5</td>
        <td>Ophiuchus</td>
        <td>7</td>
        <td>H</td>
        <td>Virgo</td>
        <td>6</td>
      </tr>
      <tr>
        <td>
          Don&rsquo;t Stop Me Now
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/dont_stop_me_now.mid') }}')"
          >
          </span>
        </td>
        <td>F#5</td>
        <td>Octans</td>
        <td>3</td>
        <td>T</td>
        <td>Ophiuchus</td>
        <td>9</td>
      </tr>
      <tr>
        <td>
          Drive My Car
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/drive_my_car.mid') }}')"
          >
          </span>
        </td>
        <td>A#5</td>
        <td>Pegasus</td>
        <td>3</td>
        <td>G</td>
        <td>Leo</td>
        <td>5</td>
      </tr>
      <tr>
        <td>
          Drops of Jupiter
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/drops_of_jupiter.mid') }}')"
          >
          </span>
        </td>
        <td>D#5</td>
        <td>Monoceros</td>
        <td>2</td>
        <td>O</td>
        <td>Aquarius</td>
        <td>12</td>
      </tr>
      <tr>
        <td>
          Have Yourself A Merry Little Christmas
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/have_yourself_a_merry_little_christmas.mid') }}')"
          >
          </span>
        </td>
        <td>D5</td>
        <td>Microscopium</td>
        <td>2</td>
        <td>I</td>
        <td>Cancer</td>
        <td>4</td>
      </tr>
      <tr>
        <td>
          Piano Man
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/piano_man.mid') }}')"
          >
          </span>
        </td>
        <td>D#2</td>
        <td>Centaurus</td>
        <td>4</td>
        <td>T</td>
        <td>Aries</td>
        <td>1</td>
      </tr>
      <tr>
        <td>
          (The) Rainbow Connection
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/rainbow_connection.mid') }}')"
          >
          </span>
        </td>
        <td>C5</td>
        <td>Lyra</td>
        <td>4</td>
        <td>A</td>
        <td>Scorpio</td>
        <td>8</td>
      </tr>
      <tr>
        <td>
          Sk8er Boi
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/sk8r_boi.mid') }}')"
          >
          </span>
        </td>
        <td>C#4</td>
        <td>Horologium</td>
        <td>4</td>
        <td>O</td>
        <td>Capricorn</td>
        <td>11</td>
      </tr>
      <tr>
        <td>
          So What
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/so_what.mid') }}')"
          >
          </span>
        </td>
        <td>C#6</td>
        <td>Pictor</td>
        <td>4</td>
        <td>T</td>
        <td>Libra</td>
        <td>7</td>
      </tr>
      <tr>
        <td>
          Twinkle Twinkle Little Star
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/twinkle_twinkle_little_star.mid') }}')"
          >
          </span>
        </td>
        <td>C#5</td>
        <td>Mensa</td>
        <td>3</td>
        <td>N</td>
        <td>Gemini</td>
        <td>3</td>
      </tr>
      <tr>
        <td>
          Video Killed The Radio Star
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/video_killed_the_radio_star.mid') }}')"
          >
          </span>
        </td>
        <td>A3</td>
        <td>Fornax</td>
        <td>4</td>
        <td>N</td>
        <td>Pisces</td>
        <td>13</td>
      </tr>
      <tr>
        <td>
          When You Wish Upon A Star
          <span
             class="fa fa-play-circle play-button"
             aria-hidden="true"
             onClick="play(this, '{{ asset_url_for('star_search/when_you_wish_upon_a_star.mid') }}')"
          >
          </span>
        </td>
        <td>G#5</td>
        <td>Orion</td>
        <td>1</td>
        <td>O</td>
        <td>Taurus</td>
        <td>2</td>
      </tr>
    </table>
  </div>
{% endblock %}
